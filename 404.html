<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <title>Mengarahkan...</title>
  <meta name="robots" content="noindex">

  <!-- ===== Favicon & Manifest ===== -->
  <link rel="icon" href="/assets/icons/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="72x72" href="/assets/icons/favicon-72x72.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="128x128" href="/assets/icons/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="144x144" href="/assets/icons/favicon-144x144.png">
  <link rel="icon" type="image/png" sizes="180x180" href="/assets/icons/favicon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/assets/icons/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="384x384" href="/assets/icons/favicon-384x384.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/assets/icons/favicon-512x512.png">
  <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="theme-color" content="#3182ce">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <script>
    window.onload = () => {
      const path = window.location.pathname; // contoh: "/tujamsos", "/admin/tujamsos", dll
      console.log("404 intercept:", path);

      // Daftar path yang tidak boleh dianggap tenant
      const reserved = [
        "", "/", "index", "index.html",
        "admin", "admin.html",
        "super-admin", "super-admin.html",
        "daftar", "daftar.html",
        "404.html"
      ];

      // === 1️⃣ /admin.html/<tenant> → /admin.html?u=<tenant> ===
      const matchAdminHtml = path.match(/^\/admin\.html\/([\w-]+)$/);
      if (matchAdminHtml) {
        const tenant = matchAdminHtml[1];
        window.location.replace(`/admin.html?u=${tenant}`);
        return;
      }

      // === 2️⃣ /admin/<tenant> → /admin.html?u=<tenant> ===
      const matchAdminDir = path.match(/^\/admin\/([\w-]+)$/);
      if (matchAdminDir) {
        const tenant = matchAdminDir[1];
        window.location.replace(`/admin.html?u=${tenant}`);
        return;
      }

      // === 3️⃣ /<tenant> langsung (selama bukan reserved) → /?u=<tenant> ===
      const matchTenant = path.match(/^\/([\w-]+)$/);
      if (matchTenant) {
        const tenant = matchTenant[1];
        if (!reserved.includes(tenant)) {
          window.location.replace(`/?u=${tenant}`);
          return;
        }
      }

      // === 4️⃣ Fallback ke home.html ===
      window.location.replace("/home.html");
    };
  </script>
</head>

<body>
  <p style="font-family:sans-serif; text-align:center; margin-top:30vh;">
    Mengarahkan ke halaman tenant...
  </p>
</body>

</html>